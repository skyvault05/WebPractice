<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signup</title>
    <style>
        form > input[value="가입하기"]{
            visibility: hidden;
        }
        td > label::after{
            content:" : ";
        }
        fieldset{
            border:none;
            margin:0;
            padding:0;
        }
    </style>
    <script>
        window.onload = function(){
            let dupId = document.getElementById("btDupChk");
            let btSignup = document.getElementById("btSignup");
            let txtId = document.getElementById("txtId");
            let form = document.querySelector("form");
            let txtPassword = document.getElementById("password");
            let txtPasswordCheck = document.getElementById("password-check");
            
            btSignup.addEventListener("click", function(e){
            	e.preventDefault();
            	form.action = "/html/signup.jsp";            	
                    if(txtPassword.value==txtPasswordCheck.value){
                    alert('비밀번호가 서로 다릅니다.');
                    txtPassword.select();
                    txtPassword.focus();
                }
            });
            
            // btSignup.addEventListener("click", function(event){
            //     event.preventDefault();
            //     form.action = "/html/signup.jsp";
            //     console.log(form.action);
            // });

            dupId.addEventListener("click", function(){
				form.action = "/html/idDupChk.jsp";
                //JQuery 문법으로 AJAX사용
            	console.log("in btDupChk : clicked");
                btSignup.style.visibility='visible';
                txtId.select();
                
            });

            
        };
    </script>
</head>
<body>
    <form action="" autocomplete="off">
        <table>
            <tr>
                <td><label for="">ID</label></td>
                <td><input type="text" id="txtId" autofocus required></td>
                <td><input id="btDupChk" type="button" value="중복체크" ></td>
            </tr>
            <tr>
                <td><label for="password">비밀번호</label></td>
                <td><input type="password" name="password" id="password" required></td>
                <td></td>
            </tr>
            <tr>
                <td><label for="password-check">비밀번호 확인</label></td>
                <td><input type="password" name="password-check" id="password-check" required></td>
                <td></td>
            </tr>
            <tr>
                <td><label for="">이름</label></td>
                <td><input type="text" required></td>
                <td></td>
            </tr>
            <tr>
                <td><label for="">성별</label></td>
                <td colspan="2">
                	<fieldset>
                    	<input type="radio" name="gender" id="male" value="male" checked><label for="male">남</label>
                    	<input type="radio" name="gender" id="female" value="female"><label for="female">여</label>
                	</fieldset>
                </td>
            </tr>            
        </table>        
            <input type="submit" id="btSignup" value="가입하기">
            <input type="reset" value="CLEAR">
    </form>
    
</body>
</html>